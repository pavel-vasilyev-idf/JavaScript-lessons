(()=>{"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var t,n,o,r,a,c,u,l,i,s,d,m,v,f,p,y,h,g,S,q;(function e(t){var n=document.querySelector("#timer-hours"),o=document.querySelector("#timer-minutes"),r=document.querySelector("#timer-seconds"),a=document.querySelector("#timer-days"),c=document.querySelector(".dott-days"),u=0;function l(){var l,i,s,d=(l=(new Date(t).getTime()-(new Date).getTime())/1e3,i=Math.floor(l%60),s=Math.floor(l/60%60),{timeRemaining:l,hours:Math.floor(l/60/60%24),minutes:s,seconds:i,days:Math.floor(l/60/60/24)});if(a.textContent=d.days<10?"0".concat(d.days):d.days,n.textContent=d.hours<10?"0".concat(d.hours):d.hours,o.textContent=d.minutes<10?"0".concat(d.minutes):d.minutes,r.textContent=d.seconds<10?"0".concat(d.seconds):d.seconds,(d.hours<0||d.minutes<0||d.seconds<0||d.days<0)&&(n.textContent="00",o.textContent="00",r.textContent="00",a.textContent="00"),0===d.days?(a.style.display="none",c.style.display="none"):(a.style.display="inline-block",c.style.display="inline-block"),d.timeRemaining<0){var m=new Date(t);m.setDate(m.getDate()),e(m),clearInterval(u)}}l(),u=setInterval(l,1e3)})("31 May 2021"),document.body.addEventListener("click",(function(e){var t=e.target;(t.closest(".menu")||!t.closest("menu")&&document.querySelector("menu").classList.contains("active-menu")||t.closest("menu")&&t.closest('[href^="#"]'))&&document.querySelector("menu").classList.toggle("active-menu")})),y=document.querySelector(".popup"),h=document.querySelectorAll(".popup-btn"),g=document.querySelector(".popup-content"),S={count:-445,speed:12,startPos:-445,endPos:0},q=function e(){S.startPos>S.endPos?S.count-=S.speed:S.count+=S.speed,g.style.transform="translateY(".concat(S.count,"px)"),(S.startPos>S.endPos?S.count>S.endPos:S.count<S.endPos)&&requestAnimationFrame(e)},h.forEach((function(e){e.addEventListener("click",(function(){y.style.display="block",screen.width>768&&(S.count=S.startPos,requestAnimationFrame(q))}))})),y.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-close")?y.style.display="none":(t=t.closest(".popup-content"))||(y.style.display="none")})),v=document.querySelector(".service-header"),f=v.querySelectorAll(".service-header-tab"),p=document.querySelectorAll(".service-tab"),v.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&f.forEach((function(e,n){e===t&&function(e){for(var t=0;t<p.length;t++)e===t?(f[t].classList.add("active"),p[t].classList.remove("d-none")):(f[t].classList.remove("active"),p[t].classList.add("d-none"))}(n)}))})),function(){var e=document.querySelector(".portfolio-content"),t=document.querySelectorAll(".portfolio-item"),n=(document.querySelectorAll(".portfolio-btn"),document.querySelector(".portfolio-dots"));t.forEach((function(){var e=document.createElement("li");e.classList.add("dot"),n.appendChild(e)})),n.children[0].classList.add("dot-active");var o=document.querySelectorAll(".dot"),r=0,a=0,c=function(e,t,n){e[t].classList.remove(n)},u=function(e,t,n){e[t].classList.add(n)},l=function(){c(t,r,"portfolio-item-active"),c(o,r,"dot-active"),++r>=t.length&&(r=0),u(t,r,"portfolio-item-active"),u(o,r,"dot-active")},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;a=setInterval(l,e)};e.addEventListener("click",(function(e){e.preventDefault();var n=e.target;c(t,r,"portfolio-item-active"),c(o,r,"dot-active"),n.matches(".portfolio-btn, .dot")&&(n.matches("#arrow-right")?r++:n.matches("#arrow-left")?r--:n.matches(".dot")&&o.forEach((function(e,t){e===n&&(r=t)})),r>=t.length&&(r=0),r<0&&(r=t.length-1),u(t,r,"portfolio-item-active"),u(o,r,"dot-active"))})),e.addEventListener("mouseover",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(a)})),e.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&i()})),i(5e3)}(),d=document.querySelector("#command .row"),m=function(){var e=event.target;if(e.classList.contains("command__photo")){var t=e.src;e.src=e.dataset.img,e.dataset.img=t}},d.addEventListener("mouseover",m),d.addEventListener("mouseout",m),n=document.querySelectorAll("input.calc-item"),o=document.querySelectorAll("[name=user_name]"),r=document.querySelectorAll("[name=user_message]"),a=document.querySelectorAll("[name=user_email]"),c=document.querySelectorAll("[name=user_phone]"),u=new Set,l=function(e){e.value=e.value.replace(/\s+/g," "),e.value=e.value.replace(/\-+/g,"-");var t=new RegExp("ReGeX"+e.value+"ReGeX");/^[/ /-]/.test(t)&&(e.value=e.value.replace(/^[/ /-]/,"")),/[/ /-]$/.test(t)&&(e.value=e.value.replace(/[/ /-]$/,""))},i=function(e){return e.value.split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()})).join(" ")},s=function(e,t){e.value.match(t)||(u.add(e.value),e.value="")},o.forEach((function(e){e.addEventListener("blur",(function(){l(e),e.value=i(e),s(e,/[а-яё]{2,}/gi)}))})),r.forEach((function(e){e.addEventListener("blur",(function(){l(e),e.value=i(e),s(e,/[а-яё]{2,}/gi)}))})),a.forEach((function(e){e.addEventListener("blur",(function(){s(e,/\w+@\w+\.\w{2,3}/g),l(e)}))})),c.forEach((function(e){e.addEventListener("blur",(function(){l(e),s(e,/\+?([-()]*\d){7,10}/g)}))})),window.addEventListener("input",(function(e){var t;e.target.matches(".calc-item")&&n.forEach((function(e){e.value=e.value.replace(/[^\d]/g,"")})),e.target.matches("[name=user_name]")&&(e.target.value=e.target.value.replace(/[^а-яё\-\ ]/gi,"")),e.target.matches("#form2-message")&&((t=e.target).value=t.value.replace(/[^а-яё0-9\.\,\:\-\!\? ]/gi,"")),e.target.matches("[name=user_email]")&&(e.target.value=e.target.value.replace(/[^a-z0-9\@\_\-\.\!\~\*\']/gi,"")),e.target.matches("[name=user_phone]")&&(e.target.value=e.target.value.replace(/[^\d\(\)\-\+]/g,""))})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-day"),r=document.querySelector(".calc-square"),a=document.querySelector(".calc-count"),c=document.getElementById("total"),u=document.querySelectorAll("input.calc-item"),l=function(){var t=0,u=1,l=1,s=n.options[n.selectedIndex].value,d=+r.value;a.value>1&&(u+=(a.value-1)/10),o.value&&o.value<5?l*=2:o.value&&o.value<10&&(l*=1.5),s&&d&&(t=e*s*d*u*l),c.textContent=t,i(c,0,c.textContent,800)};function i(e,t,n,o){var r=null;window.requestAnimationFrame((function a(c){r||(r=c);var u=Math.min((c-r)/o,1);e.innerHTML=Math.floor(u*(n-t)+t),u<1&&window.requestAnimationFrame(a)}))}t.addEventListener("change",(function(e){var t=e.target;(t.matches("select")||t.matches("input"))&&l(),t.matches("select.calc-type")&&""===n.value&&u.forEach((function(e){e.value=""}))}))}(),(t=function(t){var n=document.getElementById(t),o=document.createElement("div");o.style.cssText="font-size: 3rem",n.addEventListener("submit",(function(r){r.preventDefault(),n.appendChild(o),o.innerHTML='\n        <img src="https://i.gifer.com/YmvJ.gif" alt="cat">\n      ';var a,c=new FormData(n);(a=Object.fromEntries(c),fetch("server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).then((function(r){if(200!==r.status)throw new Error("status network not 200");o.textContent="Все успешно отпралвено",function(t){var n;(n=document.getElementById(t).elements,function(t){if(Array.isArray(t))return e(t)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?e(t,n):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).filter((function(e){return"button"!==e.tagName.toLowerCase()&&"button"!==e.type})).forEach((function(e){return e.value=""}))}(t),setTimeout((function(){o.innerHTML="",document.querySelector(".popup").style.display="none"}),4e3),n.querySelectorAll("input").forEach((function(e){e.value=e.defaultValue}))})).catch((function(e){o.textContent="Что-то пошло не так...",console.error(e),setTimeout((function(){o.innerHTML="",document.querySelector(".popup").style.display="none"}),4e3)}))}))})("form1"),t("form2"),t("form3")})();
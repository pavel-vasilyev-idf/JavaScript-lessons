(()=>{"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var t,n,o,r,a,c,u,l,i,s,d,m,v,f,p,y,h,g,S;(function e(t){var n=document.querySelector("#timer-hours"),o=document.querySelector("#timer-minutes"),r=document.querySelector("#timer-seconds"),a=document.querySelector("#timer-days"),c=document.querySelector(".dott-days"),u=0;function l(){var l,i,s,d=(l=(new Date(t).getTime()-(new Date).getTime())/1e3,i=Math.floor(l%60),s=Math.floor(l/60%60),{timeRemaining:l,hours:Math.floor(l/60/60%24),minutes:s,seconds:i,days:Math.floor(l/60/60/24)});if(a.textContent=d.days<10?"0".concat(d.days):d.days,n.textContent=d.hours<10?"0".concat(d.hours):d.hours,o.textContent=d.minutes<10?"0".concat(d.minutes):d.minutes,r.textContent=d.seconds<10?"0".concat(d.seconds):d.seconds,(d.hours<0||d.minutes<0||d.seconds<0||d.days<0)&&(n.textContent="00",o.textContent="00",r.textContent="00",a.textContent="00"),0===d.days?(a.style.display="none",c.style.display="none"):(a.style.display="inline-block",c.style.display="inline-block"),d.timeRemaining<0){var m=new Date(t);m.setDate(m.getDate()),e(m),clearInterval(u)}}l(),u=setInterval(l,1e3)})("31 May 2021"),document.querySelector("menu").querySelector("a.close-btn").addEventListener("click",(function(e){e.preventDefault()})),document.body.addEventListener("click",(function(e){var t=e.target;(t.closest(".menu")||!t.closest("menu")&&document.querySelector("menu").classList.contains("active-menu")||t.closest("menu")&&t.closest('[href^="#"]'))&&document.querySelector("menu").classList.toggle("active-menu")})),p=document.querySelector(".popup"),y=document.querySelectorAll(".popup-btn"),h=document.querySelector(".popup-content"),g={count:-445,speed:12,startPos:-445,endPos:0},S=function e(){g.startPos>g.endPos?g.count-=g.speed:g.count+=g.speed,h.style.transform="translateY(".concat(g.count,"px)"),(g.startPos>g.endPos?g.count>g.endPos:g.count<g.endPos)&&requestAnimationFrame(e)},y.forEach((function(e){e.addEventListener("click",(function(){p.style.display="block",screen.width>768&&(g.count=g.startPos,requestAnimationFrame(S))}))})),p.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-close")?p.style.display="none":(t=t.closest(".popup-content"))||(p.style.display="none")})),m=document.querySelector(".service-header"),v=m.querySelectorAll(".service-header-tab"),f=document.querySelectorAll(".service-tab"),m.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&v.forEach((function(e,n){e===t&&function(e){for(var t=0;t<f.length;t++)e===t?(v[t].classList.add("active"),f[t].classList.remove("d-none")):(v[t].classList.remove("active"),f[t].classList.add("d-none"))}(n)}))})),function(){var e=document.querySelector(".portfolio-content"),t=document.querySelectorAll(".portfolio-item"),n=(document.querySelectorAll(".portfolio-btn"),document.querySelector(".portfolio-dots"));t.forEach((function(){var e=document.createElement("li");e.classList.add("dot"),n.appendChild(e)})),n.children[0].classList.add("dot-active");var o=document.querySelectorAll(".dot"),r=0,a=0,c=function(e,t,n){e[t].classList.remove(n)},u=function(e,t,n){e[t].classList.add(n)},l=function(){c(t,r,"portfolio-item-active"),c(o,r,"dot-active"),++r>=t.length&&(r=0),u(t,r,"portfolio-item-active"),u(o,r,"dot-active")},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;a=setInterval(l,e)};e.addEventListener("click",(function(e){e.preventDefault();var n=e.target;c(t,r,"portfolio-item-active"),c(o,r,"dot-active"),n.matches(".portfolio-btn, .dot")&&(n.matches("#arrow-right")?r++:n.matches("#arrow-left")?r--:n.matches(".dot")&&o.forEach((function(e,t){e===n&&(r=t)})),r>=t.length&&(r=0),r<0&&(r=t.length-1),u(t,r,"portfolio-item-active"),u(o,r,"dot-active"))})),e.addEventListener("mouseover",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(a)})),e.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&i()})),i(5e3)}(),s=document.querySelector("#command .row"),d=function(){var e=event.target;if(e.classList.contains("command__photo")){var t=e.src;e.src=e.dataset.img,e.dataset.img=t}},s.addEventListener("mouseover",d),s.addEventListener("mouseout",d),t=document.querySelectorAll("input.calc-item"),n=document.querySelectorAll("[name=user_name]"),o=document.querySelectorAll("[name=user_message]"),r=document.querySelectorAll("[name=user_email]"),a=document.querySelectorAll("[name=user_phone]"),c=new Set,u=function(e){e.value=e.value.replace(/\s+/g," "),e.value=e.value.replace(/\-+/g,"-");var t=new RegExp("ReGeX"+e.value+"ReGeX");/^[/ /-]/.test(t)&&(e.value=e.value.replace(/^[/ /-]/,"")),/[/ /-]$/.test(t)&&(e.value=e.value.replace(/[/ /-]$/,""))},l=function(e){return e.value.split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()})).join(" ")},i=function(e,t){e.value.match(t)||(c.add(e.value),e.value="")},n.forEach((function(e){e.addEventListener("blur",(function(){u(e),e.value=l(e),i(e,/[а-яё]{2,}/gi)}))})),o.forEach((function(e){e.addEventListener("blur",(function(){u(e),e.value=l(e),i(e,/[а-яё]{2,}/gi)}))})),r.forEach((function(e){e.required=!0,e.addEventListener("blur",(function(){e.value=e.value.replace(/\s/g,""),i(e,/\w+@\w+.\w{2,3}/g)}))})),a.forEach((function(e){e.addEventListener("blur",(function(){u(e),i(e,/\+?([-()]*\d){7,10}/g)}))})),window.addEventListener("input",(function(e){var n;e.target.matches(".calc-item")&&t.forEach((function(e){e.value=e.value.replace(/[^\d]/g,"")})),e.target.matches("[name=user_name]")&&(e.target.value=e.target.value.replace(/[^а-яё\-\ ]/gi,"")),e.target.matches("#form2-message")&&((n=e.target).value=n.value.replace(/[^а-яё0-9\.\,\:\-\!\? ]/gi,"")),e.target.matches("[name=user_email]")&&(e.target.value=e.target.value.replace(/[^a-z0-9\@\_\-\.\!\~\*\']/gi,"")),e.target.matches("[name=user_phone]")&&(e.target.value=e.target.value.replace(/[^\d\(\)\-\+]/g,""),e.target.value.length>10&&(e.target.value=e.target.value.substring(0,11)))})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-day"),r=document.querySelector(".calc-square"),a=document.querySelector(".calc-count"),c=document.getElementById("total"),u=document.querySelectorAll("input.calc-item"),l=function(){var t=0,u=1,l=1,s=n.options[n.selectedIndex].value,d=+r.value;a.value>1&&(u+=(a.value-1)/10),o.value&&o.value<5?l*=2:o.value&&o.value<10&&(l*=1.5),s&&d&&(t=e*s*d*u*l),c.textContent=t,i(c,0,c.textContent,800)};function i(e,t,n,o){var r=null;window.requestAnimationFrame((function a(c){r||(r=c);var u=Math.min((c-r)/o,1);e.innerHTML=Math.floor(u*(n-t)+t),u<1&&window.requestAnimationFrame(a)}))}t.addEventListener("change",(function(e){var t=e.target;(t.matches("select")||t.matches("input"))&&l(),t.matches("select.calc-type")&&""===n.value&&u.forEach((function(e){e.value=""}))}))}(),function(){statusMessage.style.cssText="color: #fff; font-size: 24px;";var t=function(t){var n=document.getElementById(t),o=document.createElement("div");o.style.cssText="font-size: 3rem",n.addEventListener("submit",(function(r){r.preventDefault(),n.appendChild(o),o.innerHTML='\n        <img src="https://i.gifer.com/YmvJ.gif" alt="cat">\n      ';var a,c=new FormData(n);(a=Object.fromEntries(c),fetch("server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).then((function(r){if(200!==r.status)throw new Error("status network not 200");o.textContent="Все успешно отправлено",function(t){var n;(n=document.getElementById(t).elements,function(t){if(Array.isArray(t))return e(t)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?e(t,n):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).filter((function(e){return"button"!==e.tagName.toLowerCase()&&"button"!==e.type})).forEach((function(e){return e.value=""}))}(t),setTimeout((function(){o.innerHTML="",document.querySelector(".popup").style.display="none"}),4e3),n.querySelectorAll("input").forEach((function(e){e.value=e.defaultValue}))})).catch((function(e){o.textContent="Что-то пошло не так...",console.error(e),setTimeout((function(){o.innerHTML="",document.querySelector(".popup").style.display="none"}),4e3)}))}))};t("form1"),t("form2"),t("form3")}()})();